extraction:
  cpp:
    prepare:
      packages:
      - "libxml-simple-perl"
      - "aspell"
      - "aspell-en"
      - "libnl-nf-3-dev"
      - "libzmq3-dev"
      - "libzmq5"
      - "swig3.0"
      - "libpython2.7-dev"
      - "libgtest-dev"
      - "libgmock-dev"
      - "dh-exec"
      - "doxygen"
      - "cdbs"
      - "bison"
      - "flex"
      - "graphviz"
      - "autoconf-archive"
      - "libzmq3-dev"
      - "libzmq5"
      - "libgmock-dev"
      - "libtbb-dev"
      - "libtbb2"
      - "libboost-dev"
      - "libboost-program-options-dev"
      - "libboost-system-dev"
      - "libboost-thread-dev"
      - "libboost-atomic-dev"
      - "libboost-chrono-dev"
      - "libboost-container-dev"
      - "libboost-context-dev"
      - "libboost-contract-dev"
      - "libboost-coroutine-dev"
      - "libboost-date-time-dev"
      - "libboost-fiber-dev"
      - "libboost-filesystem-dev"
      - "libboost-graph-parallel-dev"
      - "libboost-log-dev"
      - "libboost-regex-dev"
      - "googletest"
      - "libgtest-dev"
      - "libgcc-8-dev"
      - "libhiredis0.14"
      - "libhiredis-dev"
      - "libnl-3-dev"
      - "libnl-route-3-dev"
      - "libnl-genl-3-200"
      - "libnl-nf-3-200"
      - "libnl-genl-3-dev"
      - "uuid-dev"
      - "libyang"
      - "libyang-dev"
    after_prepare:
    - "export GNU_MAKE=make"
    - "git clone https://github.com/Azure/sonic-swss-common; pushd sonic-swss-common; ./autogen.sh; fakeroot dpkg-buildpackage -us -uc -b; popd"
    - "dpkg-deb -x libswsscommon_1.0.0_amd64.deb $LGTM_WORKSPACE"
    - "dpkg-deb -x libswsscommon-dev_1.0.0_amd64.deb $LGTM_WORKSPACE"
    index:
      build_command:
        - "sed -i '19 i JOBS := 1' Makefile"
        - "sed -i -e \"s/ -flto//g\" Makefile"
        - "sed -i '37 i LIBS += $(nullstring)-L${LGTM_WORKSPACE}/usr/lib/x86_64-linux-gnu -I${LGTM_WORKSPACE}/usr/include' Makefile"
        - "$GNU_MAKE all INCLUDES=\"-L${LGTM_WORKSPACE}/usr/lib/x86_64-linux-gnu -I${LGTM_WORKSPACE}/usr/include\""
